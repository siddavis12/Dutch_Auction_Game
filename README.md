# Dutch Auction Game

실시간 멀티플레이어 네덜란드 경매 게임입니다. 최대 500명이 동시에 접속하여 경매에 참여할 수 있습니다.

## 🚀 빠른 시작 (추천)

### 자동 배포 스크립트 사용

**Windows:**
```bash
deploy.bat
```

**Linux/Mac:**
```bash
./deploy.sh
```

이 스크립트는 자동으로:
1. 의존성 설치
2. 클라이언트 빌드  
3. 프로덕션 서버 시작

## 📱 접속 방법

서버 실행 시 콘솔에 접속 주소가 표시됩니다:

```
🚀 Dutch Auction Server Started!
📍 Local access: http://localhost:3500
🌐 Network access:
   http://192.168.1.100:3500
```

웹 브라우저에서 표시된 주소로 접속 → 이름 입력 → 게임 시작!

## 🔧 수동 설치 및 실행

### 1. 의존성 설치

```bash
npm install
```

### 2. 실행 옵션

**개발 모드:**
```bash
npm run dev          # Vite 개발 서버와 함께 실행
npm run dev:force    # 포트 충돌 무시하고 실행
npm run dev:watch    # nodemon으로 자동 재시작
```

**프로덕션 모드:**
```bash
npm run build        # 클라이언트 빌드
npm run start        # 프로덕션 서버 시작 (포트 3500)
npm run start:cluster      # 기본 클러스터 모드
npm run start:cluster-opt  # 최적화된 클러스터 모드 (500+ 사용자)
```

## 👑 어드민 기능

**어드민 계정:** `Kane Lee`로 로그인 (config.ini에서 변경 가능)

**어드민 권한:**
- 경매 생성 및 시작
- 전체 채팅 활성화/비활성화
- 톱니바퀴 ⚙️ 버튼으로 어드민 패널 접근

## 🎮 게임 방법

1. **이동**: 게임판을 클릭하여 아바타 이동
2. **경매**: 가격이 떨어지는 동안 원하는 가격에 입찰
3. **승자 대사**: 낙찰 시 개인 메시지를 선택하여 모든 참가자에게 전달
4. **채팅**: 실시간 채팅으로 소통 (5초간 말풍선 표시)
5. **공지**: 관리자가 `/메시지`로 전체 공지 가능

## 🌟 주요 기능

- **네덜란드 경매**: 시작가에서 점점 가격이 내려가는 경매 방식
- **실시간 멀티플레이**: 최대 500명 동시 접속 가능
- **게임판 이동**: 클릭으로 아바타를 자유롭게 이동
- **실시간 채팅**: 아바타 위에 말풍선으로 표시
- **승자 대사 시스템**: 낙찰 후 개인 메시지 선택 및 실시간 브로드캐스팅
- **관리자 기능**: 경매 생성/시작, 채팅 관리, 전체 공지
- **우승자 표시**: 경매 낙찰자 실시간 표시
- **고급 사운드 효과**: 경매 시작/낙찰 음악 + 심장박동 사운드
- **동기화된 애니메이션**: 심장박동에 맞춰 움직이는 UI 요소
- **로그 기록**: 모든 활동이 자동으로 기록됨

## 🔧 시스템 요구사항

- **Node.js**: 16.0.0 이상
- **브라우저**: Chrome, Firefox, Safari, Edge 최신 버전
- **네트워크**: 로컬 네트워크 또는 인터넷 연결

## ⚙️ 설정

`config.ini` 파일로 서버 설정을 변경할 수 있습니다:
- 포트 번호
- 관리자 이름
- 경매 설정 (가격 하락 속도/간격)
- 애니메이션 속도
- **승자 대사 옵션**: 4개의 선택지 텍스트 커스터마이징
- **대사 선택 시간**: 승자가 대사를 선택할 수 있는 시간 (밀리초)

## 🎵 사운드 설정

### 외부 사운드 파일 (선택사항)
1. `/public/sounds/` 폴더에 다음 MP3 파일 추가:
   - `auction-start.mp3`: 경매 시작 시 재생
   - `auction-won.mp3`: 낙찰 시 재생
2. 파일이 없어도 게임은 정상 작동하나 사운드가 재생되지 않음
3. 권장 사양: 1MB 이하, 2-5초 길이의 효과음

### 자동 생성 사운드 (항상 활성)
- **심장박동 사운드**: 승자 대사 선택 시 자동으로 생성되는 긴장감 있는 효과음
- **Web Audio API**: 별도 파일 없이 프로그래밍적으로 생성
- **동기화된 애니메이션**: 심장박동 리듬에 맞춰 UI 요소가 움직임

## 🎭 승자 대사 시스템

낙찰 후 특별한 인터랙션 시스템:

### 동작 과정
1. **경매 낙찰** → 모든 참가자에게 대사 선택 화면 표시
2. **승자 화면** → 4개의 대사 선택지와 타이머 표시
3. **다른 참가자 화면** → 대기 메시지와 애니메이션 표시
4. **대사 선택** → 선택된 대사가 모든 참가자에게 실시간 브로드캐스팅
5. **시간 경과** → 설정된 시간 후 축하 모달로 전환

### 특별 효과
- **심장박동 사운드**: 긴장감 있는 배경음 (90 BPM)
- **펄스 애니메이션**: 선택된 대사가 심장박동에 맞춰 움직임
- **음악 페이드**: 경매 음악이 자연스럽게 사라짐
- **실시간 동기화**: 모든 참가자가 동시에 같은 경험

### 설정 변경
`config.ini`에서 다음 항목 수정 가능:
```ini
[winner_dialogue]
option1 = 사용자 정의 대사 1
option2 = 사용자 정의 대사 2
option3 = 사용자 정의 대사 3
option4 = 사용자 정의 대사 4
selection_timeout = 7000  # 선택 시간 (밀리초)
```

## 🚨 문제 해결

### 포트 충돌 시
```bash
npm run kill-port:win  # Windows
npm run kill-port      # Linux/Mac
```

### 개발 중 변경사항 반영
- **서버 코드 변경**: 서버 재시작만 필요
- **클라이언트 코드 변경**: 개발 모드에서는 자동 반영, 프로덕션에서는 `npm run build` 필요


## 🎯 사용 시나리오

1. **강의실/교실**: 수업 중 경매 게임
2. **회사 이벤트**: 팀 빌딩 활동
3. **파티/모임**: 재미있는 그룹 활동
4. **온라인 이벤트**: 원격 참여자들과 함께